clc
clear
close all
conf_k = 1.96/(sqrt(20));
%% knn for prm
knn_range = [2,20,60,95];
knn_02 = struct('var', 2, ...
    'time', [0.130159139633, 0.118903875351, 0.0972120761871, 0.0923070907593, 0.156420946121, 0.128278970718, 0.125301122665, 0.175091981888, 0.156027078629, 0.120491027832, 0.120626926422, 0.142296075821, 0.0907251834869, 0.156124830246, 0.110499858856, 0.135986089706, 0.185766935349, 0.16702413559, 0.103992938995, 0.111259937286]);
knn_20 = struct('var',20, ...
    'time', [0.143523931503, 0.151234149933, 0.150932788849, 0.16851401329, 0.125816106796, 0.150538921356, 0.0989298820496, 0.0913228988647, 0.118329048157, 0.127609014511, 0.108587026596, 0.167919158936, 0.122192144394, 0.200456142426, 0.0935111045837, 0.11268901825, 0.198260068893, 0.142157077789,0.133938074112, 0.170228004456]);
knn_60 = struct('var',60, ...
    'time', [0.0771520137787,0.161941051483, 0.131823062897, 0.169919013977, 0.185908079147, 0.149682998657, 0.211441993713, 0.155369997025,0.153607845306, 0.108218193054, 0.173654079437, 0.166096925735,0.115972995758, 0.123878002167,0.143290996552, 0.137388944626,0.110648155212, 0.146234989166,0.160201072693, 0.0642998218536]);
knn_95 = struct('var',95, ...
    'time', [0.163717746735, 0.186847925186, 0.132453203201, 0.108211040497, 0.138588905334, 0.147310018539, 0.139370203018, 0.199523925781, 0.168343067169, 0.159296035767, 0.0869829654694, 0.0647170543671, 0.133009910583, 0.121901035309, 0.122754812241, 0.138145208359, 0.175776004791, 0.124979972839, 0.199604034424, 0.0698258876801]);
knn_results = {knn_02,knn_20,knn_60,knn_95};
knn_time = zeros(1,4);
knn_sd = zeros(1,4);
for idx = 1:length(knn_results)
    cur_result = knn_results{idx};
    [cur_mean, cur_std] = calDistribution(cur_result,'knn');
    knn_time(idx) = cur_mean;
    knn_sd(idx) = cur_std;
end
figure()
errorbar(knn_range, knn_time, knn_sd * conf_k, 'o--')
xlabel('knn value')
ylabel('Mean Total Time/sec')
grid on 


%% theshold for prm
prm_ct_range = [0.01, 0.05, 0.20, 0.70, 0.95];
prm_ct_001 = struct('var',0.01, ...
    'time', [0.0685811042786, 0.063159942627, 0.0621571540833, 0.0622320175171, 0.0588600635529, 0.0676119327545, 0.0529780387878, 0.0422670841217, 0.0587050914764, 0.0561339855194, 0.0630421638489, 0.0774290561676, 0.0683701038361, 0.0543971061707, 0.0598368644714, 0.063441991806, 0.0590190887451, 0.054792881012]);
prm_ct_005 = struct('var',0.05, ...
    'time', [0.0580620765686,0.0526850223541, 0.0526249408722, 0.080531835556, 0.0686650276184, 0.0660061836243, 0.0653948783875, 0.0566031932831, 0.0477659702301, 0.0829420089722, 0.0629420280457, 0.063766002655, 0.0648770332336, 0.0527341365814, 0.0556561946869, 0.0871911048889, 0.0726978778839, 0.0537850856781, 0.0672509670258, 0.057718038559]);
prm_ct_020 = struct('var',0.20, ...
    'time', [0.0571851730347, 0.0564148426056, 0.0701529979706, 0.0672359466553, 0.0627529621124, 0.0591430664062, 0.0622568130493, 0.0642249584198, 0.0542690753937, 0.0544707775116, 0.0491108894348, 0.0471761226654, 0.0671398639679, 0.0652358531952, 0.0602509975433, 0.0591080188751, 0.0772299766541, 0.0487909317017, 0.0645749568939, 0.0655989646912]);
prm_ct_070 = struct('var',0.70, ...
    'time', [0.0766208171844, 0.0517990589142, 0.0661399364471, 0.0513050556183, 0.0600719451904, 0.0588698387146, 0.0748839378357, 0.0586700439453, 0.0487048625946, 0.0593960285187, 0.0692639350891, 0.0605161190033, 0.0470979213715, 0.0545098781586, 0.0589530467987, 0.0614409446716, 0.0480968952179, 0.0541138648987, 0.052875995636, 0.0567100048065]);
prm_ct_098 = struct('var',0.98, ...
    'time', [0.0513517856598, 0.0469801425934, 0.0758898258209, 0.0621960163116, 0.0541889667511, 0.0679979324341, 0.0551819801331, 0.0539238452911, 0.0452978610992, 0.069267988205, 0.0519449710846, 0.0584959983826, 0.0468938350677, 0.0608849525452, 0.0729961395264, 0.0469892024994, 0.063579082489, 0.0648679733276, 0.058874130249, 0.0624928474426]);
prm_ct_results = {prm_ct_001, prm_ct_005, prm_ct_020, prm_ct_070, prm_ct_098};
prm_ct_time = zeros(1,length(prm_ct_results));
prm_ct_sd = zeros(1,length(prm_ct_results));
for idx = 1:length(prm_ct_results)
    cur_result = prm_ct_results{idx};
    [cur_mean, cur_std] = calDistribution(cur_result,'PRM CT');
    prm_ct_time(idx) = cur_mean;
    prm_ct_sd(idx) = cur_std;
end 
figure()
errorbar(prm_ct_range, prm_ct_time,prm_ct_sd* conf_k, 'o--')
xlabel('Connection Threshold for PRM')
ylabel('Mean Total Time/sec')
grid on 

%% theshold for rrt
rrt_ct_range = [0.01, 0.05, 0.20, 0.70, 0.95];
rrt_ct_001 = struct('var',0.01, ...
    'time', [0.4735455513, 0.687798500061, 0.369745969772, 2.21894526482, 1.17689347267, 0.812784194946, 0.50426864624, 0.613251447678, 0.634234905243, 0.820456266403, 0.758734226227, 1.00165653229, 0.798441648483, 0.570843935013, 0.358913183212, 0.977999210358, 1.09668540955, 1.55438327789, 0.638239145279, 0.464031934738]);
rrt_ct_005 = struct('var',0.05, ...
    'time',[0.199958324432, 0.146220684052, 0.164295434952, 0.13677072525, 0.174894571304, 0.111487150192, 0.179087162018, 0.178929805756, 0.260138511658, 0.150110006332, 0.137303829193, 0.165966272354, 0.148153066635, 0.270800352097, 0.113164186478, 0.136445999146, 0.223494768143, 0.140440225601, 0.172428846359, 0.126969099045]);
rrt_ct_020 = struct('var',0.20, ...
    'time', [0.0428738594055, 0.0569560527802, 0.0881509780884, 0.0530338287354, 0.0446000099182, 0.04518699646, 0.0455820560455, 0.0515749454498, 0.0652508735657, 0.0485239028931, 0.108167886734, 0.0634708404541, 0.0747528076172, 0.0819621086121, 0.0670840740204, 0.0660839080811, 0.0605800151825, 0.0485739707947, 0.0405790805817, 0.0959000587463]);
rrt_ct_070 = struct('var',0.70, ...
    'time', [0.0201790332794, 0.052994966507, 0.0279009342194, 0.0416929721832, 0.0414741039276, 0.049211025238, 0.0324339866638, 0.0360288619995, 0.0376579761505, 0.0286781787872, 0.0427582263947, 0.0381968021393, 0.0493137836456, 0.0298738479614, 0.036789894104, 0.0401601791382, 0.0284278392792, 0.0427241325378, 0.0482921600342, 0.0505142211914]);
rrt_ct_098 = struct('var',0.98, ...
    'time', [0.0382511615753, 0.0504810810089, 0.0285618305206, 0.0494599342346, 0.0396418571472, 0.0289659500122, 0.0266401767731, 0.0441930294037, 0.0303390026093, 0.0266890525818, 0.0345199108124, 0.0379219055176, 0.0403978824615, 0.0358328819275, 0.0345590114594, 0.035364151001, 0.0373010635376, 0.0298101902008, 0.0242388248444, 0.0546901226044]);
rrt_ct_results = {rrt_ct_001, rrt_ct_005, rrt_ct_020, rrt_ct_070, rrt_ct_098};
rrt_ct_time = zeros(1,length(rrt_ct_results));
rrt_ct_sd = zeros(1,length(rrt_ct_results));
for idx = 1:length(rrt_ct_results)
    cur_result = rrt_ct_results{idx};
    [cur_mean, cur_std] = calDistribution(cur_result,'RRT CT');
    rrt_ct_time(idx) = cur_mean;
    rrt_ct_sd(idx) = cur_std;
end 
figure()
errorbar(rrt_ct_range, rrt_ct_time, rrt_ct_sd* conf_k, 'o--')
xlabel('Connection Threshold for RRT')
ylabel('Mean Total Time/sec')
grid on 

%% perturbation theshold for rrt
rrt_pt_range = [0.01, 0.05, 0.20, 0.70, 0.95];
rrt_pt_001 = struct('var',0.01, ...
    'time', [0.320586681366, 0.404224157333, 0.471855401993, 0.367873430252, 0.330770492554, 0.430208444595, 0.456031560898, 0.459489822388, 0.337475061417, 0.340339899063, 0.421815156937, 0.466417312622, 0.375227451324, 0.490842819214, 0.354751586914, 0.37659239769, 0.350960493088, 0.27469420433, 0.38450217247, 0.376793861389]);
rrt_pt_005 = struct('var',0.05, ...
    'time',[0.175454378128, 0.140776872635, 0.175675392151, 0.123573303223, 0.128358602524, 0.179686069489, 0.127663135529, 0.144820451736, 0.127466201782, 0.0944819450378, 0.28266453743, 0.120318889618, 0.119228363037, 0.216327667236, 0.133766889572, 0.102006673813, 0.132454872131, 0.14062166214, 0.184136390686, 0.186259508133]);
rrt_pt_020 = struct('var',0.20, ...
    'time',[0.104744911194, 0.113498687744, 0.15596818924, 0.148200035095, 0.14870595932, 0.109042167664, 0.119592189789, 0.130785703659, 0.182546138763, 0.098757982254, 0.1341817379, 0.199413776398, 0.144286394119, 0.128643035889, 0.0819761753082, 0.171290636063, 0.143237113953, 0.142205953598, 0.106782197952, 0.261681079865]);
rrt_pt_070 = struct('var',0.70, ...
    'time',[0.197145938873, 0.188620328903, 0.131361961365, 0.266441345215, 0.180012226105, 0.115720748901, 0.15513253212, 0.148788690567, 0.174214839935, 0.117901802063, 0.110232591629, 0.266558170319, 0.144176959991, 0.172546863556, 0.198064804077, 0.103394031525, 0.213378667831, 0.178475141525, 0.18424987793, 0.184772968292]);
rrt_pt_098 = struct('var',0.98, ...
    'time',[0.137812137604, 0.153540849686, 0.142822742462, 0.231309890747, 0.140761852264, 0.138429164886, 0.129332780838, 0.155167341232, 0.176432609558, 0.119510173798, 0.163200616837, 0.12192940712, 0.125533819199, 0.0945980548859, 0.111264944077, 0.127802371979, 0.120436191559, 0.155075550079, 0.127015113831, 0.181436061859]);
rrt_pt_results = {rrt_pt_001, rrt_pt_005, rrt_pt_020, rrt_pt_070, rrt_pt_098};
rrt_pt_time = zeros(1,length(rrt_pt_results));
rrt_pt_sd = zeros(1,length(rrt_pt_results));
for idx = 1:length(rrt_pt_results)
    cur_result = rrt_pt_results{idx};
    [cur_mean, cur_std] = calDistribution(cur_result,'RRT PT');
    rrt_pt_time(idx) = cur_mean;
    rrt_pt_sd(idx) = cur_std;
end 
figure()
errorbar(rrt_pt_range, rrt_pt_time,rrt_pt_sd * conf_k, 'o--')
xlabel('Perturbation Radius for RRT')
ylabel('Mean Total Time/sec')
grid on 


